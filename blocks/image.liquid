{% doc %}
  Renders an image block with configurable styling and behavior.

  @example
  {% content_for 'block', type: 'image', id: 'image' %}
{% enddoc %}

{% if block.settings.image != blank %}
  <div class="image-block {{ block.settings.image_style }}" {{ block.shopify_attributes }}>
    {% if block.settings.url != blank %}
      <a href="{{ block.settings.url }}" class="block">
    {% endif %}

    <img
      src="{{ block.settings.image | image_url: width: block.settings.image_width }}"
      alt="{{ block.settings.image.alt | default: block.settings.alt_text }}"
      class="w-full h-auto {{ block.settings.image_style }}"
      width="{{ block.settings.image_width }}"
      height="{{ block.settings.image_height }}"
      loading="{{ block.settings.loading }}"
    >

    {% if block.settings.url != blank %}
      </a>
    {% endif %}

    {% if block.settings.caption != blank %}
      <p class="text-sm text-base-content/70 mt-2 text-center">{{ block.settings.caption }}</p>
    {% endif %}
  </div>
{% endif %}

{% schema %}
{
  "name": "t:general.image",
  "settings": [
    {
      "type": "image_picker",
      "id": "image",
      "label": "t:labels.image"
    },
    {
      "type": "text",
      "id": "alt_text",
      "label": "t:labels.alt_text",
      "info": "t:labels.alt_text_info"
    },
    {
      "type": "text",
      "id": "caption",
      "label": "t:labels.caption"
    },
    {
      "type": "url",
      "id": "url",
      "label": "t:labels.url",
      "info": "t:labels.url_info"
    },
    {
      "type": "range",
      "id": "image_width",
      "label": "t:labels.image_width",
      "min": 200,
      "max": 2000,
      "step": 50,
      "default": 800,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "image_height",
      "label": "t:labels.image_height",
      "min": 200,
      "max": 2000,
      "step": 50,
      "default": 600,
      "unit": "px"
    },
    {
      "type": "select",
      "id": "image_style",
      "label": "t:labels.image_style",
      "default": "rounded-lg",
      "options": [
        { "value": "", "label": "t:options.image_style.none" },
        { "value": "rounded", "label": "t:options.image_style.rounded" },
        { "value": "rounded-lg", "label": "t:options.image_style.rounded_large" },
        { "value": "rounded-xl", "label": "t:options.image_style.rounded_extra_large" },
        { "value": "rounded-full", "label": "t:options.image_style.circle" },
        { "value": "mask mask-squircle", "label": "t:options.image_style.squircle" },
        { "value": "mask mask-hexagon", "label": "t:options.image_style.hexagon" },
        { "value": "mask mask-triangle", "label": "t:options.image_style.triangle" }
      ]
    },
    {
      "type": "select",
      "id": "loading",
      "label": "t:labels.loading",
      "default": "lazy",
      "options": [
        { "value": "lazy", "label": "t:options.loading.lazy" },
        { "value": "eager", "label": "t:options.loading.eager" }
      ]
    }
  ],
  "presets": [
    {
      "name": "t:general.image",
      "category": "t:general.media"
    }
  ]
}
{% endschema %}
