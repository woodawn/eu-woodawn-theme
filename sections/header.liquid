<header
  class="navbar bg-base-100 shadow-sm{% if section.settings.sticky_header %} sticky top-0 z-50{% endif %}"
  data-sticky-header="{{ section.settings.sticky_header }}"
  data-sticky-scroll="{{ section.settings.sticky_scroll }}"
>
  <div class="navbar-start">
    <!-- Mobile menu button -->
    <div class="dropdown lg:hidden">
      <div tabindex="0" role="button" class="btn btn-ghost btn-circle">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </div>
      <ul tabindex="0" class="menu menu-sm dropdown-content mt-3 z-[1] p-2 shadow bg-base-100 rounded-box w-52">
        {% for link in section.settings.menu.links %}
          <li>
            <a href="{{ link.url }}" class="link link-hover">{{ link.title }}</a>
          </li>
        {% endfor %}
      </ul>
    </div>

    <!-- Logo -->
    <h2 class="text-xl font-bold">
      {{ shop.name | link_to: routes.root_url, class: 'link link-hover' }}
    </h2>
  </div>

  <!-- Desktop Navigation -->
  <div class="navbar-center hidden lg:flex">
    <ul class="menu menu-horizontal px-1">
      {% for link in section.settings.menu.links %}
        <li>
          {{ link.title | link_to: link.url, class: 'link link-hover' }}
        </li>
      {% endfor %}
    </ul>
  </div>

  <div class="navbar-end">
    <div class="flex items-center gap-2 lg:gap-4">
      <!-- Search button for mobile -->
      <div class="dropdown dropdown-end lg:hidden">
        <div tabindex="0" role="button" class="btn btn-ghost btn-circle">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
          </svg>
        </div>
        <div tabindex="0" class="dropdown-content z-[1] p-4 shadow bg-base-100 rounded-box w-80">
          <form action="{{ routes.search_url }}" method="get" role="search">
            <div class="join w-full">
              <input
                type="search"
                name="q"
                placeholder="{{ 'search.placeholder' | t }}"
                class="input input-bordered join-item flex-1"
              >
              <button type="submit" class="btn btn-primary join-item">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                </svg>
              </button>
            </div>
          </form>
        </div>
      </div>

      <!-- Wishlist button -->
      <div class="indicator">
        <a href="/pages/wishlist" class="btn btn-ghost btn-circle">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
          </svg>
        </a>
        <span class="badge badge-primary badge-sm indicator-item" data-wishlist-count style="display: none;">0</span>
      </div>

      <!-- Compare button -->
      <button
        class="btn btn-ghost btn-sm hidden"
        data-compare-open
        style="display: none;"
      >
        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
        </svg>
        Compare (0)
      </button>

      {% if shop.customer_accounts_enabled %}
        <a href="{{ routes.account_url }}" class="btn btn-ghost btn-circle">
          {{ 'icon-account.svg' | inline_asset_content }}
        </a>
      {% endif %}

      <div class="indicator">
        <button class="btn btn-ghost btn-circle" data-cart-toggle>
          {{ 'icon-cart.svg' | inline_asset_content }}
        </button>
        {% if cart.item_count > 0 %}
          <span class="badge badge-primary badge-sm indicator-item" data-cart-count>{{ cart.item_count }}</span>
        {% else %}
          <span class="badge badge-primary badge-sm indicator-item" data-cart-count style="display: none;">0</span>
        {% endif %}
      </div>
    </div>
  </div>
</header>

{% stylesheet %}
  /* DaisyUI navbar 样式已足够，无需额外 CSS */
  .navbar svg {
    width: 1.5rem;
    height: 1.5rem;
  }

  /* Sticky header 样式 */
  .navbar.sticky {
    transition: all 0.3s ease-in-out;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
  }

  .navbar.sticky.scrolled {
    background-color: rgba(var(--b1) / 0.95);
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  }

  /* 当 header 滚动时隐藏/显示效果 */
  .navbar.sticky.hide-on-scroll {
    transform: translateY(-100%);
  }

  .navbar.sticky.show-on-scroll {
    transform: translateY(0);
  }
{% endstylesheet %}

{% schema %}
{
  "name": "t:general.header",
  "settings": [
    {
      "type": "link_list",
      "id": "menu",
      "label": "t:labels.menu"
    },
    {
      "type": "header",
      "content": "Sticky Header Settings"
    },
    {
      "type": "checkbox",
      "id": "sticky_header",
      "label": "Enable Sticky Header",
      "default": true,
      "info": "Make the header stick to the top when scrolling"
    },
    {
      "type": "select",
      "id": "sticky_scroll",
      "label": "Sticky Scroll Behavior",
      "default": "always_visible",
      "options": [
        {
          "value": "always_visible",
          "label": "Always Visible"
        },
        {
          "value": "hide_on_scroll_down",
          "label": "Hide on Scroll Down"
        },
        {
          "value": "show_on_scroll_up",
          "label": "Show on Scroll Up"
        }
      ],
      "info": "Choose how the header behaves when scrolling"
    }
  ]
}
{% endschema %}
