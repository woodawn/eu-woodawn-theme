{% comment %}
  Sticky Cart - Fixed bottom cart bar that shows cart summary
  Usage: {% render 'sticky-cart' %}
{% endcomment %}

<div class="sticky-cart fixed bottom-0 left-0 right-0 bg-base-100 border-t border-base-300 shadow-lg transform translate-y-full transition-transform duration-300 ease-in-out z-40" data-sticky-cart>
  <div class="container mx-auto px-4 py-3">
    <div class="flex items-center justify-between gap-4">
      <!-- Cart Summary -->
      <div class="flex items-center gap-3 flex-1 min-w-0">
        <div class="flex items-center gap-2">
          <div class="indicator">
            <button class="btn btn-sm btn-circle btn-ghost" data-cart-toggle>
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6m8 0V9a2 2 0 00-2-2H9a2 2 0 00-2 2v4.01"></path>
              </svg>
            </button>
            <span class="badge badge-primary badge-sm indicator-item" data-cart-count style="display: none;">0</span>
          </div>
        </div>
        
        <div class="flex-1 min-w-0">
          <div class="text-sm font-medium" data-cart-summary>
            <span data-cart-item-count>0</span> item(s) in cart
          </div>
          <div class="text-xs text-base-content/70" data-cart-subtotal>
            Subtotal: <span class="font-semibold text-primary" data-cart-total>$0.00</span>
          </div>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="flex items-center gap-2">
        <a href="/cart" class="btn btn-sm btn-outline" data-cart-view>
          View Cart
        </a>
        <a href="/checkout" class="btn btn-sm btn-primary" data-cart-checkout>
          Checkout
        </a>
      </div>
    </div>
  </div>
</div>

<style>
  .sticky-cart.show {
    transform: translateY(0);
  }
  
  /* Animation when item is added to cart */
  .sticky-cart.cart-added {
    animation: cartAdded 0.6s ease;
  }
  
  @keyframes cartAdded {
    0% {
      transform: translateY(0) scale(1);
    }
    50% {
      transform: translateY(-10px) scale(1.05);
    }
    100% {
      transform: translateY(0) scale(1);
    }
  }
  
  /* Hide sticky cart on cart page */
  .template-cart .sticky-cart {
    display: none !important;
  }
  
  /* Hide sticky cart on checkout page */
  .template-checkout .sticky-cart {
    display: none !important;
  }
  
  /* Add subtle animation for cart count badge */
  .sticky-cart .badge {
    transition: all 0.3s ease;
  }
  
  .sticky-cart .badge:not([style*="display: none"]) {
    animation: bounce 0.6s ease;
  }
  
  @keyframes bounce {
    0%, 20%, 50%, 80%, 100% {
      transform: translateY(0);
    }
    40% {
      transform: translateY(-10px);
    }
    60% {
      transform: translateY(-5px);
    }
  }
  
  /* Hover effects for buttons */
  .sticky-cart .btn {
    transition: all 0.2s ease;
  }
  
  .sticky-cart .btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  }
  
  /* Pulse animation for cart icon when items are added */
  .sticky-cart .btn[data-cart-toggle]:hover svg {
    animation: pulse 1s infinite;
  }
  
  @keyframes pulse {
    0% {
      transform: scale(1);
    }
    50% {
      transform: scale(1.1);
    }
    100% {
      transform: scale(1);
    }
  }
  
  /* Responsive adjustments */
  @media (max-width: 640px) {
    .sticky-cart .container {
      padding-left: 1rem;
      padding-right: 1rem;
    }
    
    .sticky-cart .flex {
      flex-direction: column;
      gap: 0.75rem;
    }
    
    .sticky-cart .flex-1 {
      text-align: center;
    }
    
    .sticky-cart .flex.items-center.gap-2 {
      width: 100%;
      justify-content: center;
    }
    
    /* Make buttons full width on mobile */
    .sticky-cart .btn {
      flex: 1;
    }
  }
  
  /* Add backdrop blur effect for modern browsers */
  @supports (backdrop-filter: blur(10px)) {
    .sticky-cart {
      backdrop-filter: blur(10px);
      background-color: rgba(255, 255, 255, 0.9);
    }
    
    [data-theme="dark"] .sticky-cart {
      background-color: rgba(0, 0, 0, 0.9);
    }
  }
</style>
